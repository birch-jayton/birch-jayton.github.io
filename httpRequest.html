<!DOCTYPE html>
<html>
<head>
	<title>Instantiation</title>
	<link rel="stylesheet" type="text/css" href="birchStyle.css">
	<link href="https://fonts.googleapis.com/css?family=Supermercado+One" rel="stylesheet">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<script type="text/javascript" src="birchScript.js"></script>
</head>
<body>
<div class="sidenav">
  <a href="index.html">About</a>
  <button class="dropdown-btn">Week 2 
    <i class="caret material-icons">expand_more</i>
  </button>
  <div class="dropdown-container">
    <a href="variables.html">Variables</a>
    <a href="functions.html">Functions</a>
    <a href="parameters.html">Parameters</a>
    <a href="conditionals.html">Conditionals</a>
    <a href="arrays.html">Arrays</a>
    <a href="assocArrays.html">Associative Arrays</a>
    <a href="loops.html">Loops</a>
  </div>
  <button class="dropdown-btn">Week 3
    <i class="caret material-icons">expand_more</i>
  </button>
  <div class="dropdown-container">
    <a href="objectCreationFunctions.html">Object Creation Functions</a>
    <a href="inheritance.html">Inheritance</a>
    <a href="properties.html">Properties</a>
    <a href="methods.html">Methods</a>
    <a href="instantiation.html">Instantiation</a>
  </div>
  <button class="dropdown-btn active_at_start">Week 4
    <i class="caret material-icons">expand_more</i>
  </button>
  <div class="dropdown-container">
    <a class="active_child_at_start" href="httpRequest.html">Using XMLHTTPRequest</a>
  </div>
  <button class="dropdown-btn">Week 5 
    <i class="caret material-icons">expand_more</i>
  </button>
  <div class="dropdown-container">
    <a href="#">JSON</a>
    <a href="#">Stringify</a>
  </div>
  <button class="dropdown-btn">Week 6 
    <i class="caret material-icons">expand_more</i>
  </button>
  <div class="dropdown-container">
    <a href="#">Local Storage API</a>
    <a href="#">Storing and Retrieving Simple Data</a>
    <a href="#">Arrays</a>
    <a href="#">Associative Arrays</a>
    <a href="#">Objects</a>
  </div>
  <button class="dropdown-btn">Week 7
    <i class="caret material-icons">expand_more</i>
  </button>
  <div class="dropdown-container">
    <a href="#">DOM Manipulation</a>
    <a href="#">Manipulating CSS Class Properties Using JavaScript</a>
  </div>
  <button class="dropdown-btn">Week 8 
    <i class="caret material-icons">expand_more</i>
  </button>
  <div class="dropdown-container">
    <a href="#">CSS3 Transitions and Animations</a>
    <a href="#">Standard JavaScript Events</a>
  </div>
  <button class="dropdown-btn">Week 9
    <i class="caret material-icons">expand_more</i>
  </button>
  <div class="dropdown-container">
    <a href="#">HTML5 Tags</a>
  </div>
  <button class="dropdown-btn">Week 10 
    <i class="caret material-icons">expand_more</i>
  </button>
  <div class="dropdown-container">
    <a href="#">Transitions</a>
    <a href="#">Transforms</a>
    <a href="#">Animations</a>
  </div>
</div>
<div class="main">
  <div class="pagination lesson_header">
    <a left href="instantiation.html">❮</a>
    <h2 class="title">Using XMLHTTPRequest</h2>
    <a right href="#">❯</a>
  </div>


  <p>Browsers utilize a <b>XMLHttpRequest</b> object that can be used to get data from a server. This can be used for many things. You can use a RESTful API if you want to call data from a server and have it return a JSON object (an example of this would be getting the latest tweets from a user on Twitter and displaying it on your website using the Twitter API). You can also dynamically change a page with information from a different server without the user having to reload the browser. This practice is called <b>AJAX</b>.</p>
  <h2>Ajax</h2>
  <p>This is a very basic example of AJAX. We will retrieve data from another file on this server and change the webpage to display it. CLick the "Change Text Button" and what the request happen.</p>
  <p class="changableText" id="textToChange">This text will change</p>
  <button type="button" onclick="change_text_button_clicked()">Change Text</button>
  <br>
  <p>This is the function that runs when you click the button:</p>
  <script src="https://gist.github.com/birch-jayton/89882313dee69081775ccd4d19577d4f.js"></script>
  <p>We don't have to define the XMLHttpRequest object because it is built into the browser so we just instantiate it. We then modify the object to our need.</p>
  <p>Notice the numbers in the if/then statement. HTTP servers return status codes (I am sure we are all familiar with the common 404-Not Found response when browsing old websites). The "200" status code is the "OK" code definition meaning the request has succeeded. For a list of all HTTP status codes and their definitions <a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html">Click Here</a>. The readyState is a property of the XMLHttpRequestObject that holds the status of the object. We check if it is "4" because that means the requst is finished.</p>
  <h2>XMLHttpRequest with a JSON Web Service</h2>
  <p>We can also use the XMLHttpRequest object to get XML or JSON as a response from another server. This opens up many opportunities to use data from other services in your own application. For this example let's use <a href="http://www.omdbapi.com/">The Open Movie Database</a> API to let the user search for a movie and display some results.</p>
  Enter a movie title: <input type="text" id="movieInput">
  <button type="button" onclick="get_movie_data_button_clicked()">Search Movies</button>
  <p id="resultExplanation">This is possible by using a XMLHttpRequest object and sending it to a URL with the query included. It then sends back to us JSON in plain text. We parse the JSON to create a JSON object and we can use it like any other JavaScript Object and use the properties of it as we like. To view the JSON we get as a response in its entirety, open the developer's console and you will see that it was logged.</p>
  <p>So let's take a look at what this request looked like...</p>
  <script src="https://gist.github.com/birch-jayton/4575006b4ad575708b1f665da6b2450b.js"></script>
  <p>Notice that it is a GET request so our parameters for our request (in this case being 's' to signify "search" followed by a string that the service will search for us) go in the URL string. The text we get back as a response is JSON, but our end doesn't know that. It is interpreting it as plain text. To parse that text and create a JSON object we use the JSON.parse() function seen in line 13. Applying AJAX principles we then can <b>dynamically</b> create and fill the table (this happens in the displaySearchResults() function on line 13). This is trivial but can be exhaustive. The function looks like this:</p>
  <script src="https://gist.github.com/birch-jayton/b78afa5267047fdeb018ff5dd38a4b01.js"></script>

</div>
<script type="text/javascript">
var dropdown = document.getElementsByClassName("dropdown-btn");
var i;

for (i = 0; i < dropdown.length; i++) {
  dropdown[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var dropdownContent = this.nextElementSibling;
    if (dropdownContent.style.display === "block") {
      dropdownContent.style.display = "none";
    } else {
      dropdownContent.style.display = "block";
    }
  });
}
</script>
</body>
</html>